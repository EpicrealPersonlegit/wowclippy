local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local atmGui = script.Parent
local frame = atmGui:WaitForChild("Frame")

-- Animation settings
local HOVER_OFFSET = 8
local TWEEN_TIME = 0.2
local TWEEN_EASING = Enum.EasingStyle.Quad
local TWEEN_DIRECTION = Enum.EasingDirection.InOut

-- Store original positions and tweens
local originalPositions = {}
local activeTweens = {}

-- Function to get original position of a GUI element
local function getOriginalPosition(guiObject)
	if not originalPositions[guiObject] then
		originalPositions[guiObject] = guiObject.Position
	end
	return originalPositions[guiObject]
end

-- Function to create hover tween
local function createHoverTween(guiObject, offset)
	local originalPos = getOriginalPosition(guiObject)
	local targetPos = UDim2.new(
		originalPos.X.Scale,
		originalPos.X.Offset,
		originalPos.Y.Scale,
		originalPos.Y.Offset - offset
	)
	
	return TweenService:Create(
		guiObject,
		TweenInfo.new(TWEEN_TIME, TWEEN_EASING, TWEEN_DIRECTION),
		{Position = targetPos}
	)
end

-- Function to animate element up
local function animateUp(guiObject)
	-- Cancel any existing tween for this object
	if activeTweens[guiObject] then
		activeTweens[guiObject]:Cancel()
	end
	
	local tween = createHoverTween(guiObject, HOVER_OFFSET)
	activeTweens[guiObject] = tween
	tween:Play()
	
	-- Clean up when tween completes
	tween.Completed:Connect(function()
		if activeTweens[guiObject] == tween then
			activeTweens[guiObject] = nil
		end
	end)
end

-- Function to animate element back to original position
local function animateDown(guiObject)
	-- Cancel any existing tween for this object
	if activeTweens[guiObject] then
		activeTweens[guiObject]:Cancel()
	end
	
	local originalPos = getOriginalPosition(guiObject)
	local tween = TweenService:Create(
		guiObject,
		TweenInfo.new(TWEEN_TIME, TWEEN_EASING, TWEEN_DIRECTION),
		{Position = originalPos}
	)
	activeTweens[guiObject] = tween
	tween:Play()
	
	-- Clean up when tween completes
	tween.Completed:Connect(function()
		if activeTweens[guiObject] == tween then
			activeTweens[guiObject] = nil
		end
	end)
end

-- Function to set up animations for a GUI element
local function setupAnimations(guiObject)
	-- Mouse enter/leave for hover effect
	guiObject.MouseEnter:Connect(function()
		animateUp(guiObject)
	end)
	
	guiObject.MouseLeave:Connect(function()
		animateDown(guiObject)
	end)
	
	-- Focus/unfocus for TextBoxes
	if guiObject:IsA("TextBox") then
		guiObject.Focused:Connect(function()
			animateUp(guiObject)
		end)
		
		guiObject.FocusLost:Connect(function()
			animateDown(guiObject)
		end)
	end
	
	-- Mouse down/up for buttons
	if guiObject:IsA("TextButton") then
		guiObject.MouseButton1Down:Connect(function()
			animateUp(guiObject)
		end)
		
		guiObject.MouseButton1Up:Connect(function()
			animateDown(guiObject)
		end)
	end
end

-- Set up animations for all interactive elements
local interactiveElements = {
	frame:WaitForChild("deposit"),
	frame:WaitForChild("withdraw"),
	frame:WaitForChild("transfer"),
	frame:WaitForChild("playername"),
	frame:WaitForChild("amount")
}

for _, element in ipairs(interactiveElements) do
	if element then
		setupAnimations(element)
	end
end